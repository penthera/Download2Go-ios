<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>VirtuosoLicenseProcessingDelegate Protocol Reference</title>

	<link rel="stylesheet" href="../css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1334)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title">
				<a href="../index.html">Cache &amp; Carry (Virtuoso) SDK - iOS </a>
			</h1>

			<p id="developer-home">
				<a href="../index.html">Penthera Inc</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="../index.html">Index</a></li>
<li><a href="../hierarchy.html">Hierarchy</a></li>

					<li id="on-this-page" role="navigation">
						<label>
							On This Page

							<div class="chevron">
								<div class="chevy chevron-left"></div>
								<div class="chevy chevron-right"></div>
							</div>

							<select id="jump-to">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	

	
	
	<option value="tasks">Tasks</option>
	
	

	
	

	

	
	<optgroup label="Instance Methods">
		
		<option value="//api/name/drmSubTypeForAsset:">- drmSubTypeForAsset:</option>
		
		<option value="//api/name/extractCIDForAsset:fromFairPlayRequest:">- extractCIDForAsset:fromFairPlayRequest:</option>
		
		<option value="//api/name/extractCKCForAsset:inLicenseResponse:">- extractCKCForAsset:inLicenseResponse:</option>
		
		<option value="//api/name/prepareSPCForAsset:inLicenseRequest:">- prepareSPCForAsset:inLicenseRequest:</option>
		
	</optgroup>
	
	
</select>
						</label>
					</li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview_contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">VirtuosoLicenseProcessingDelegate Protocol Reference</h1>

					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<th>Conforms to</th>
	<td>NSObject</td>
</tr><tr>
	<th>Declared in</th>
	<td>VirtuosoLicenseManager.h</td>
</tr>
						</tbody></table></div>
					

                    
					
					

					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						

						
						

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/extractCIDForAsset:fromFairPlayRequest:" title="extractCIDForAsset:fromFairPlayRequest:"></a>
	<h3 class="method-title"><code><a href="#//api/name/extractCIDForAsset:fromFairPlayRequest:">&ndash;&nbsp;extractCIDForAsset:fromFairPlayRequest:</a></code>
<span class="task-item-suffix">required method</span></h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Allows a custom CID to be used with the SDK default AVAssetResourceLoaderDelegate</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (NSString *_Nullable)extractCIDForAsset:(VirtuosoAsset *_Nonnull)<em>asset</em> fromFairPlayRequest:(NSURL *_Nonnull)<em>fpRequest</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>asset</code></th>
						<td><p>The <a href="../Classes/VirtuosoAsset.html">VirtuosoAsset</a> the licensing request is for</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>fpRequest</code></th>
						<td><p>The URL provided to the AVAssetResourceLoaderDelegate for the licensing request</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>The CID value to use during SPC creation</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Normally, the asset CID is extracted from the FairPlay license URL, which takes the form
skd://<contentID>.  Some license servers put the required content ID elsewhere.  If you
don&rsquo;t need to adjust the content ID, you can return nil and the SDK will use the default value
it detects.  If you need to override this value, you can return the proper content ID to use from
this method.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">VirtuosoLicenseManager.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/prepareSPCForAsset:inLicenseRequest:" title="prepareSPCForAsset:inLicenseRequest:"></a>
	<h3 class="method-title"><code><a href="#//api/name/prepareSPCForAsset:inLicenseRequest:">&ndash;&nbsp;prepareSPCForAsset:inLicenseRequest:</a></code>
<span class="task-item-suffix">required method</span></h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Allows custom processing of the FairPlay POST body before it is send.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (NSData *_Nullable)prepareSPCForAsset:(VirtuosoAsset *_Nonnull)<em>asset</em> inLicenseRequest:(NSData *_Nonnull)<em>spc</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>asset</code></th>
						<td><p>The <a href="../Classes/VirtuosoAsset.html">VirtuosoAsset</a> the licensing request is for</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>spc</code></th>
						<td><p>The Apple-generated SPC data value</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>An NSData object suitable for the license server POST body</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Normally, the SPC data is posted as binary as the POST body to the fairplay server.
If this is the case, you can just return the spc input without modification.  If your
server requires some custom format (base64 encoding or JSON wrapping, for example), then you
should receive the input SPC and return an NSData object suitable for posting in the POST body
to your licensing server.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">VirtuosoLicenseManager.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/extractCKCForAsset:inLicenseResponse:" title="extractCKCForAsset:inLicenseResponse:"></a>
	<h3 class="method-title"><code><a href="#//api/name/extractCKCForAsset:inLicenseResponse:">&ndash;&nbsp;extractCKCForAsset:inLicenseResponse:</a></code>
<span class="task-item-suffix">required method</span></h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Allows custom processing of the FairPlay license server response</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (NSData *_Nullable)extractCKCForAsset:(VirtuosoAsset *_Nonnull)<em>asset</em> inLicenseResponse:(NSData *_Nonnull)<em>response</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>asset</code></th>
						<td><p>The <a href="../Classes/VirtuosoAsset.html">VirtuosoAsset</a> the licensing request is for</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>response</code></th>
						<td><p>The received response from the license server</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>CKC data value suitable for handing to the player for DRM licensing</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Normally, the license server responds to a FairPlay request with binary representing
the license response (CKC).  Some license servers wrap this CKC data with other encodings,
such as base64 or JSON wrappers.  If your license server returns something other than raw
CKC data, you will need to implement this method.  You should parse the response data and return
the raw CKC data object, suitable for handing back to the player in the AVASsetResourceLoaderDelegate response.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">VirtuosoLicenseManager.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/drmSubTypeForAsset:" title="drmSubTypeForAsset:"></a>
	<h3 class="method-title"><code><a href="#//api/name/drmSubTypeForAsset:">&ndash;&nbsp;drmSubTypeForAsset:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>If you have configured custom DRM Types, this method allows you to indicate which to use for processing this asset.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (NSString *_Nullable)drmSubTypeForAsset:(VirtuosoAsset *_Nonnull)<em>asset</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>asset</code></th>
						<td><p>The <a href="../Classes/VirtuosoAsset.html">VirtuosoAsset</a> to resolve DRM SubType for.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>non-nil string ideitifying the DRM SubType for the Asset.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Normally, the resource loader will use the kVLM_FairPlay DRM type to process all requests using the configuration
stored in the <a href="../Classes/VirtuosoLicenseManager.html">VirtuosoLicenseManager</a>.  However, if you need to use different DRM systems for different assets you
wish to download, you can set configuratins with <a href="../Classes/VirtuosoLicenseManager.html">VirtuosoLicenseManager</a> using custom DRM type codes and
implement this method to indicate which DRM SubType should be used for the asset. The SubType is an arbitrary, non-nil string that uniquely identifies ths DRM system.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">VirtuosoLicenseManager.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						
					</div>
					
					

                    
                    
          
				</main>

				<footer>
					<div class="footer-copyright">
						
						<p class="copyright">Copyright &copy; 2023 Penthera Inc. All rights reserved. Updated: 2023-04-21</p>
						
						
						<p class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (build 1334)</a>.</p>
						
					</div>
				</footer>
			</div>
		</div>
	</article>

	<script src="../js/script.js"></script>
</body>
</html>